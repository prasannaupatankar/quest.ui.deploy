"use strict";(self.webpackChunkQuest=self.webpackChunkQuest||[]).push([[41002],{41002:(V,A,r)=>{r.r(A),r.d(A,{AccountModule:()=>H});var g=r(36895),l=r(90433),C=r(80529),h=r(20388),d=r(97936),m=r(16772),_=r(64369),e=r(41571),T=r(78516),b=r(3410),M=r(43421),u=r(35832);const y=function(){return["../register"]};function x(n,a){1&n&&(e.TgZ(0,"p",24)(1,"a",25),e._UZ(2,"i",26),e._uU(3),e.ALo(4,"localize"),e.qZA()()),2&n&&(e.xp6(1),e.Q6J("routerLink",e.DdM(4,y)),e.xp6(2),e.hij(" ",e.lcZ(4,2,"Register")," "))}let N=(()=>{class n extends m.c{constructor(t,o,i){super(t),this.authService=o,this._sessionService=i,this.submitting=!1}get multiTenancySideIsTeanant(){return this._sessionService.tenantId>0}get isSelfRegistrationAllowed(){return!!this._sessionService.tenantId}login(){this.submitting=!0,this.authService.authenticate(()=>this.submitting=!1)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.zs3),e.Y36(T.K),e.Y36(b.Cr))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ng-component"]],features:[e.qOj],decls:38,vars:22,consts:[[1,"text-center"],["src","assets/img/questLogo.webp","height","150"],[1,"text-center","mb-3"],["novalidate","","autocomplete","off",3,"ngSubmit"],["loginForm","ngForm"],[1,"form-group"],[1,"input-group"],["type","text","name","userNameOrEmailAddress","required","","maxlength","256",1,"form-control",3,"ngModel","placeholder","ngModelChange"],["userNameOrEmailAddressModel","ngModel","userNameOrEmailAddressEl",""],[1,"input-group-append"],[1,"input-group-text"],[1,"fas","fa-user"],[3,"control","controlEl"],["type","password","name","password","required","","maxlength","32",1,"form-control",3,"ngModel","placeholder","ngModelChange"],["passwordModel","ngModel","passwordEl",""],[1,"fas","fa-lock"],[1,"form-group","row"],[1,"col-md-8"],[1,"custom-control","custom-checkbox"],["type","checkbox","id","rememberMe","name","rememberMe",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","rememberMe",1,"custom-control-label"],[1,"col-md-4"],["type","submit",1,"btn","btn-primary","btn-block",3,"disabled"],["class","mb-1",4,"ngIf"],[1,"mb-1"],[3,"routerLink"],[1,"fa","fa-plus-circle"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div")(1,"div",0),e._UZ(2,"img",1),e.qZA(),e._UZ(3,"h6",2),e.TgZ(4,"form",3,4),e.NdJ("ngSubmit",function(){return o.login()}),e.TgZ(6,"div",5)(7,"div",6)(8,"input",7,8),e.NdJ("ngModelChange",function(s){return o.authService.authenticateModel.userNameOrEmailAddress=s}),e.ALo(11,"localize"),e.qZA(),e.TgZ(12,"div",9)(13,"div",10),e._UZ(14,"span",11),e.qZA()()(),e._UZ(15,"abp-validation-summary",12),e.qZA(),e.TgZ(16,"div",5)(17,"div",6)(18,"input",13,14),e.NdJ("ngModelChange",function(s){return o.authService.authenticateModel.password=s}),e.ALo(21,"localize"),e.qZA(),e.TgZ(22,"div",9)(23,"div",10),e._UZ(24,"span",15),e.qZA()()(),e._UZ(25,"abp-validation-summary",12),e.qZA(),e.TgZ(26,"div",16)(27,"div",17)(28,"div",18)(29,"input",19),e.NdJ("ngModelChange",function(s){return o.authService.rememberMe=s}),e.qZA(),e.TgZ(30,"label",20),e._uU(31),e.ALo(32,"localize"),e.qZA()()(),e.TgZ(33,"div",21)(34,"button",22),e._uU(35),e.ALo(36,"localize"),e.qZA()()()(),e.YNc(37,x,5,5,"p",23),e.qZA()),2&t){const i=e.MAs(5),s=e.MAs(9),f=e.MAs(10),v=e.MAs(19),Z=e.MAs(20);e.Q6J("@routerTransition",void 0),e.xp6(8),e.Q6J("ngModel",o.authService.authenticateModel.userNameOrEmailAddress)("placeholder",e.lcZ(11,14,"UserNameOrEmail")),e.xp6(7),e.Q6J("control",s)("controlEl",f),e.xp6(3),e.Q6J("ngModel",o.authService.authenticateModel.password)("placeholder",e.lcZ(21,16,"Password")),e.xp6(7),e.Q6J("control",v)("controlEl",Z),e.xp6(4),e.Q6J("ngModel",o.authService.rememberMe),e.xp6(2),e.hij(" ",e.lcZ(32,18,"RememberMe")," "),e.xp6(3),e.Q6J("disabled",!i.form.valid||o.submitting),e.xp6(1),e.hij(" ",e.lcZ(36,20,"LogIn")," "),e.xp6(2),e.Q6J("ngIf",o.isSelfRegistrationAllowed)}},dependencies:[g.O5,l._Y,l.Fj,l.Wl,l.JJ,l.JL,l.Q7,l.nD,l.On,l.F,M.F,d.rH,u.F],encapsulation:2,data:{animation:[(0,_.RP)()]}}),n})();var J=r(28746),c=r(37857);const S=function(){return["../login"]};let U=(()=>{class n extends m.c{constructor(t,o,i,s){super(t),this._accountService=o,this._router=i,this.authService=s,this.model=new c.xO,this.saving=!1}save(){this.saving=!0,this._accountService.register(this.model).pipe((0,J.x)(()=>{this.saving=!1})).subscribe(t=>{if(!t.canLogin)return this.notify.success(this.l("SuccessfullyRegistered")),void this._router.navigate(["/login"]);this.saving=!0,this.authService.authenticateModel.userNameOrEmailAddress=this.model.userName,this.authService.authenticateModel.password=this.model.password,this.authService.authenticate(()=>{this.saving=!1})})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.zs3),e.Y36(c.k4),e.Y36(d.F0),e.Y36(T.K))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ng-component"]],features:[e.qOj],decls:66,vars:44,consts:[[1,"text-center","mb-3"],["autocomplete","off",3,"ngSubmit"],["registerForm","ngForm"],[1,"form-group"],[1,"input-group"],["type","text","name","name","required","","maxlength","64",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["nameModel","ngModel","nameEl",""],[1,"input-group-append"],[1,"input-group-text"],[1,"fas","fa-arrow-left"],[3,"control","controlEl"],["type","text","name","surname","required","","maxlength","64",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["surnameModel","ngModel","surnameEl",""],["type","email","name","emailAddress","required","","maxlength","256","pattern","^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{1,})+$",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["emailAddressModel","ngModel","emailAddressEl",""],[1,"fas","fa-envelope"],["type","email","name","userName","required","","maxlength","32",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["userNameModel","ngModel","userNameEl",""],[1,"fas","fa-user"],["type","password","name","password","required","","maxlength","32",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["passwordModel","ngModel","passwordEl",""],[1,"fas","fa-lock"],[1,"row"],[1,"col-8"],["type","button",1,"btn","btn-default",3,"disabled","routerLink"],[1,"fa","fa-arrow-circle-left"],[1,"col-4"],["type","submit",1,"btn","btn-primary","btn-block",3,"disabled"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div")(1,"h4",0),e._uU(2),e.ALo(3,"localize"),e.qZA(),e.TgZ(4,"form",1,2),e.NdJ("ngSubmit",function(){return o.save()}),e.TgZ(6,"div",3)(7,"div",4)(8,"input",5,6),e.NdJ("ngModelChange",function(s){return o.model.name=s}),e.ALo(11,"localize"),e.qZA(),e.TgZ(12,"div",7)(13,"div",8),e._UZ(14,"span",9),e.qZA()()(),e._UZ(15,"abp-validation-summary",10),e.qZA(),e.TgZ(16,"div",3)(17,"div",4)(18,"input",11,12),e.NdJ("ngModelChange",function(s){return o.model.surname=s}),e.ALo(21,"localize"),e.qZA(),e.TgZ(22,"div",7)(23,"div",8),e._UZ(24,"span",9),e.qZA()()(),e._UZ(25,"abp-validation-summary",10),e.qZA(),e.TgZ(26,"div",3)(27,"div",4)(28,"input",13,14),e.NdJ("ngModelChange",function(s){return o.model.emailAddress=s}),e.ALo(31,"localize"),e.qZA(),e.TgZ(32,"div",7)(33,"div",8),e._UZ(34,"span",15),e.qZA()()(),e._UZ(35,"abp-validation-summary",10),e.qZA(),e.TgZ(36,"div",3)(37,"div",4)(38,"input",16,17),e.NdJ("ngModelChange",function(s){return o.model.userName=s}),e.ALo(41,"localize"),e.qZA(),e.TgZ(42,"div",7)(43,"div",8),e._UZ(44,"span",18),e.qZA()()(),e._UZ(45,"abp-validation-summary",10),e.qZA(),e.TgZ(46,"div",3)(47,"div",4)(48,"input",19,20),e.NdJ("ngModelChange",function(s){return o.model.password=s}),e.ALo(51,"localize"),e.qZA(),e.TgZ(52,"div",7)(53,"div",8),e._UZ(54,"span",21),e.qZA()()(),e._UZ(55,"abp-validation-summary",10),e.qZA(),e.TgZ(56,"div",22)(57,"div",23)(58,"button",24),e._UZ(59,"i",25),e._uU(60),e.ALo(61,"localize"),e.qZA()(),e.TgZ(62,"div",26)(63,"button",27),e._uU(64),e.ALo(65,"localize"),e.qZA()()()()()),2&t){const i=e.MAs(5),s=e.MAs(9),f=e.MAs(10),v=e.MAs(19),Z=e.MAs(20),X=e.MAs(29),B=e.MAs(30),P=e.MAs(39),K=e.MAs(40),G=e.MAs(49),W=e.MAs(50);e.Q6J("@routerTransition",void 0),e.xp6(2),e.Oqu(e.lcZ(3,27,"Register")),e.xp6(6),e.s9C("placeholder",e.lcZ(11,29,"Name")),e.Q6J("ngModel",o.model.name),e.xp6(7),e.Q6J("control",s)("controlEl",f),e.xp6(3),e.s9C("placeholder",e.lcZ(21,31,"Surname")),e.Q6J("ngModel",o.model.surname),e.xp6(7),e.Q6J("control",v)("controlEl",Z),e.xp6(3),e.s9C("placeholder",e.lcZ(31,33,"EmailAddress")),e.Q6J("ngModel",o.model.emailAddress),e.xp6(7),e.Q6J("control",X)("controlEl",B),e.xp6(3),e.MGl("placeholder"," ",e.lcZ(41,35,"UserName"),""),e.Q6J("ngModel",o.model.userName),e.xp6(7),e.Q6J("control",P)("controlEl",K),e.xp6(3),e.s9C("placeholder",e.lcZ(51,37,"Password")),e.Q6J("ngModel",o.model.password),e.xp6(7),e.Q6J("control",G)("controlEl",W),e.xp6(3),e.Q6J("disabled",o.saving)("routerLink",e.DdM(43,S)),e.xp6(2),e.hij(" ",e.lcZ(61,39,"Back")," "),e.xp6(3),e.Q6J("disabled",!i.form.valid||o.saving),e.xp6(1),e.hij(" ",e.lcZ(65,41,"Register")," ")}},dependencies:[l._Y,l.Fj,l.JJ,l.JL,l.Q7,l.nD,l.c5,l.On,l.F,M.F,d.rH,u.F],encapsulation:2,data:{animation:[(0,_.RP)()]}}),n})(),q=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["account-header"]],decls:1,vars:0,consts:[[1,"login-logo"]],template:function(t,o){1&t&&e._UZ(0,"div",0)},encapsulation:2,changeDetection:0}),n})(),L=(()=>{class n extends m.c{constructor(t){super(t),this.currentYear=(new Date).getFullYear(),this.versionText=this.appSession.application.version+" ["+this.appSession.application.releaseDate.toLocaleDateString()+"]"}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.zs3))},n.\u0275cmp=e.Xpm({type:n,selectors:[["account-footer"]],features:[e.qOj],decls:8,vars:5,consts:[[1,"row"],[1,"col-md-12","text-center"],[1,"ml-2"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"small"),e._uU(3),e.TgZ(4,"b",2),e._uU(5),e.ALo(6,"localize"),e.qZA(),e._uU(7),e.qZA()()()),2&t&&(e.xp6(3),e.hij(" \xa9 Copyright ",o.currentYear," "),e.xp6(2),e.Oqu(e.lcZ(6,3,"Version")),e.xp6(2),e.hij(" ",o.versionText," "))},dependencies:[u.F],encapsulation:2,changeDetection:0}),n})();class p{}p.Available=c.z6._1,p.InActive=c.z6._2,p.NotFound=c.z6._3;var F=r(20219),w=r(74307);let z=(()=>{class n extends m.c{constructor(t,o,i){super(t),this._accountService=o,this.bsModalRef=i,this.saving=!1,this.tenancyName=""}save(){if(!this.tenancyName)return abp.multiTenancy.setTenantIdCookie(void 0),this.bsModalRef.hide(),void location.reload();const t=new c.i_;t.tenancyName=this.tenancyName,this.saving=!0,this._accountService.isTenantAvailable(t).subscribe(o=>{switch(o.state){case p.Available:return abp.multiTenancy.setTenantIdCookie(o.tenantId),void location.reload();case p.InActive:this.message.warn(this.l("TenantIsNotActive",this.tenancyName));break;case p.NotFound:this.message.warn(this.l("ThereIsNoTenantDefinedWithName{0}",this.tenancyName))}},()=>{this.saving=!1})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.zs3),e.Y36(c.k4),e.Y36(h.UZ))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ng-component"]],features:[e.qOj],decls:16,vars:12,consts:[["autocomplete","off",1,"form-horizontal",3,"ngSubmit"],["changeTenantForm","ngForm"],[3,"title","onCloseClick"],[1,"modal-body"],[1,"form-group","row"],["for","tenancyName",1,"col-md-3","col-form-label"],[1,"col-md-9"],["type","text","id","tenancyName","name","tenancyName","maxlength","64",1,"form-control",3,"ngModel","ngModelChange"],[1,"fa","fa-info-circle"],[3,"cancelDisabled","saveDisabled","onCancelClick"]],template:function(t,o){if(1&t&&(e.TgZ(0,"form",0,1),e.NdJ("ngSubmit",function(){return o.save()}),e.TgZ(2,"abp-modal-header",2),e.NdJ("onCloseClick",function(){return o.bsModalRef.hide()}),e.ALo(3,"localize"),e.qZA(),e.TgZ(4,"div",3)(5,"div",4)(6,"label",5),e._uU(7),e.ALo(8,"localize"),e.qZA(),e.TgZ(9,"div",6)(10,"input",7),e.NdJ("ngModelChange",function(s){return o.tenancyName=s}),e.qZA()()(),e.TgZ(11,"span"),e._UZ(12,"i",8),e._uU(13),e.ALo(14,"localize"),e.qZA()(),e.TgZ(15,"abp-modal-footer",9),e.NdJ("onCancelClick",function(){return o.bsModalRef.hide()}),e.qZA()()),2&t){const i=e.MAs(1);e.xp6(2),e.Q6J("title",e.lcZ(3,6,"ChangeTenant")),e.xp6(5),e.hij(" ",e.lcZ(8,8,"TenancyName")," "),e.xp6(3),e.Q6J("ngModel",o.tenancyName),e.xp6(3),e.hij(" ",e.lcZ(14,10,"LeaveEmptyToSwitchToHost")," "),e.xp6(2),e.Q6J("cancelDisabled",o.saving)("saveDisabled",!i.form.valid||o.saving)}},dependencies:[l._Y,l.Fj,l.JJ,l.JL,l.nD,l.On,l.F,F.r,w.E,u.F],encapsulation:2}),n})();function Q(n,a){if(1&n&&(e.TgZ(0,"span",5)(1,"strong"),e._uU(2),e.qZA()()),2&n){const t=e.oxw(2);e.s9C("title",t.name),e.xp6(2),e.Oqu(t.tenancyName)}}function E(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"localize"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"NotSelected")))}function O(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",1)(1,"span"),e._uU(2),e.ALo(3,"localize"),e.YNc(4,Q,3,2,"span",2),e.YNc(5,E,3,3,"span",3),e._uU(6," ("),e.TgZ(7,"a",4),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.showChangeModal())}),e._uU(8),e.ALo(9,"localize"),e.qZA(),e._uU(10,") "),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,4,"CurrentTenant"),": "),e.xp6(2),e.Q6J("ngIf",t.tenancyName),e.xp6(1),e.Q6J("ngIf",!t.tenancyName),e.xp6(3),e.hij(" ",e.lcZ(9,6,"Change")," ")}}let R=(()=>{class n extends m.c{constructor(t,o){super(t),this._modalService=o,this.tenancyName="",this.name=""}get isMultiTenancyEnabled(){return abp.multiTenancy.isEnabled}ngOnInit(){this.appSession.tenant&&(this.tenancyName=this.appSession.tenant.tenancyName,this.name=this.appSession.tenant.name)}showChangeModal(){const t=this._modalService.show(z);this.appSession.tenant&&(t.content.tenancyName=this.appSession.tenant.tenancyName)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.zs3),e.Y36(h.tT))},n.\u0275cmp=e.Xpm({type:n,selectors:[["tenant-change"]],features:[e.qOj],decls:1,vars:1,consts:[["class","text-center tenant-change-component",4,"ngIf"],[1,"text-center","tenant-change-component"],[3,"title",4,"ngIf"],[4,"ngIf"],["href","javascript:;",3,"click"],[3,"title"]],template:function(t,o){1&t&&e.YNc(0,O,11,8,"div",0),2&t&&e.Q6J("ngIf",o.isMultiTenancyEnabled)},dependencies:[g.O5,u.F],encapsulation:2}),n})();function Y(n,a){1&n&&(e.TgZ(0,"div",4),e._UZ(1,"tenant-change"),e.qZA())}let j=(()=>{class n extends m.c{constructor(t,o){super(t),this.renderer=o}showTenantChange(){return abp.multiTenancy.isEnabled}ngOnInit(){this.renderer.addClass(document.body,"login-page")}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.zs3),e.Y36(e.Qsj))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:1,consts:[[1,"login-box"],[1,"card"],["class","card-header",4,"ngIf"],[1,"card-body","login-card-body"],[1,"card-header"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"account-header"),e.TgZ(2,"div",1),e.YNc(3,Y,2,0,"div",2),e.TgZ(4,"div",3),e._UZ(5,"router-outlet"),e.qZA()(),e._UZ(6,"account-footer"),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngIf",o.showTenantChange()))},dependencies:[g.O5,d.lC,q,L,R],encapsulation:2}),n})(),D=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[d.Bz.forChild([{path:"",component:j,children:[{path:"login",component:N},{path:"register",component:U}]}]),d.Bz]}),n})();var I=r(55696),k=r(82035);let H=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[g.ez,l.u5,C.JF,C.Ed,k.m,I.L,D,h.zk.forChild()]}),n})()}}]);